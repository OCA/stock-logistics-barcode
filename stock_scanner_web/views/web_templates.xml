<?xml version="1.0" encoding="utf-8"?>
<!-- Copyright 2016 Angel Moya <http://angelmoya.es>
     License AGPL-3.0 or later (http://www.gnu.org/licenses/agpl). -->

<openerp>
    <data>

        <template id="stock_scanner_web.assets_frontend" name="Website assets">
            <script type="text/javascript" src="/stock_scanner_web/static/src/js/stock_scanner_web.js"/>
            <link rel="stylesheet" href="/stock_scanner_web/static/src/css/stock_scanner_web.css"/>
        </template>

        <template id="layout" name="Main layout">&lt;!DOCTYPE html&gt;
            <html>
                <head>
                    <title>Scanner Web</title>

                    <link rel="stylesheet" href="/web/static/lib/bootstrap/css/bootstrap.css"/>
                    <link rel="stylesheet" href="/web/static/lib/jquery.ui/css/smoothness/jquery-ui-1.9.1.custom.css"/>
                    <link rel="stylesheet" href="/web/static/lib/fontawesome/css/font-awesome.css"/>

                    <t t-call-assets="stock_scanner_web.assets_frontend" t-js="false"/>
                </head>
                <body>

                    <div class="content">
                        <t t-raw="0"/>
                    </div>

                    <t t-call-assets="stock_scanner_web.assets_frontend" t-css="false"/>
                </body>
            </html>
        </template>

        <template id="scanner_call" name="header" page="True">
            <t t-call="stock_scanner_web.layout">
                <div id="wrap" class="oe_structure oe_empty">
                    <div class="row">
                        <div class="col-xs-12 text-center">
                            <h3>
                                <span t-esc="code"/>
                            </h3>
                            <p t-if="code == 'L'">
                                <table class="table table-condensed">
                                    <thead>
                                        <tr>
                                            <th>Index</th>
                                            <th>Menu</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr t-foreach="result" t-as="line">
                                            <td>
                                                <span t-esc="result.index(line)"/>
                                            </td>
                                            <td t-if="len(line) != 2 and line[0] != '|'">
                                                <a id="btn-go" t-attf-href="/scanner_call/{{terminal_number}}/action/{{line}}" class="btn">
                                                    <span t-esc="line"/>
                                                </a>
                                            </td>
                                            <td t-if="len(line) != 2 and line[0] == '|'">
                                                <span t-esc="line[1:]"/>
                                            </td>
                                            <td t-if="len(line) == 2 and line[0] != '|'">
                                                <a id="btn-go" t-attf-href="/scanner_call/{{terminal_number}}/action/{{line[0]}}" class="btn">
                                                    <span t-esc="line[1]"/>
                                                </a>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </p>
                            <p t-if="code in ['M','E']">

                                <h3>
                                    <span t-esc="result[0][1:]"/>
                                </h3>
                                <t t-foreach="result[1:]" t-as="line">
                                    <p t-esc="line"/>
                                </t>
                                <a id="btn-go" t-attf-href="/scanner_call/{{terminal_number}}/action/0" class="btn">
                                    Go
                                </a>
                            </p>
                            <p t-if="code == 'F'">

                                <h3>
                                    <span t-esc="result[0][1:]"/>
                                </h3>
                                <t t-foreach="result[1:]" t-as="line">
                                    <p t-esc="line"/>
                                </t>
                                <a id="btn-go" t-attf-href="/scanner_call/{{terminal_number}}/Menu" class="btn">
                                    Go to menu
                                </a>
                            </p>
                            <p t-if="code == 'C'">

                                <h3>
                                    <span t-esc="result[0][1:]"/>
                                </h3>
                                <t t-foreach="result[1:]" t-as="line">
                                    <p t-esc="line"/>
                                </t>
                                <a id="btn-go" t-attf-href="/scanner_call/{{terminal_number}}/action/True" class="btn">
                                    Yes
                                </a>
                                <a id="btn-go" t-attf-href="/scanner_call/{{terminal_number}}/action/False" class="btn">
                                    No
                                </a>
                            </p>
                            <p t-if="code in ['N','Q']">

                                <h3>
                                    <span t-esc="result[0][1:]"/>
                                </h3>
                                <t t-foreach="result[1:]" t-as="line">
                                    <p t-esc="line"/>
                                </t>

                                <form method="get"
                                    t-att-action="'/scanner_call/%s/action' % (terminal_number)" class="search_class form-inline">
                                    <div class="input-group">
                                        <input type="number" name="message" class="search-query form-control"/>
                                        <span class="input-group-btn">
                                            <button type="submit" class="btn btn-default a-submit"><i class="fa fa-go"/></button>
                                        </span>
                                    </div>
                                </form>
                            </p>
                            <p t-if="code == 'T'">

                                <h3>
                                    <span t-esc="result[0][1:]"/>
                                </h3>
                                <t t-foreach="result[1:]" t-as="line">
                                    <p t-esc="line"/>
                                </t>

                                <form method="get"
                                    t-att-action="'/scanner_call/%s/action' % (terminal_number)" class="search_class form-inline">
                                    <div class="input-group">
                                        <input type="text" name="message" class="search-query form-control"/>
                                        <span class="input-group-btn">
                                            <button type="submit" class="btn btn-default a-submit"><i class="fa fa-go"/></button>
                                        </span>
                                    </div>
                                </form>
                            </p>
                            <p>
                                <span t-esc="result"/>
                                <span t-esc="value"/>
                            </p>
                        </div>
                    </div>
                </div>
            </t>
        </template>
    </data>
</openerp>
